<!DOCTYPE html> 
<html lang="en">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Spectrakeras CNN</title>
  <link rel="stylesheet" href="https://pyscript.net/releases/2024.10.2/core.css">
      <script type="module" src="https://pyscript.net/releases/2024.10.2/core.js"></script>
</head>
<body>
  <div id="wrap">
    <h2>SpectraKeras: Identify  minerals from spectra</h2>
    
    Upload a ASCII file with the Raman spectra or an XRD scan of an uknown mineral. A Convolutional neural netowrk machine learning algorithm trained on the <a href="https://rruff.info" target="_blank" rel="noopener noreferrer">Rruff library</a> will predict the type of mineral.
    <br>Files are discarded after prediction. <a href="https://github.com/feranick/SpectralMachine" target="_blank" rel="noopener noreferrer">SpectraKeras is open-source and code and python scripts are available on Github</a>
    To get names of the minerals corresponding to the prediction values, use the link to the ML models below.
    <br><small>Current Raman ML model: <a href="ml-raman/AAA-20231207_2023-12-07_16-03-08.csv">AAA-20231207_norm1_train-cv_hfsel20_val37 CNN_1_tflite_2-15_k4_99_1 </a></small>
    <br><small>Current XRD ML model: <a href="ml-xrd/AAA-Powder_20231210s2_2023-12-15_17-47-26.csv">AAA-Powder_20231210s2_norm1_train-cv_hfsel10_val22 CNN_powder_2-15_b4</a></small>
    
    <script type="py" src="./SpectraKeras_CNN.py" config="./pyscript.toml"></script>
    <script type="text/javascript" src="SpectraKeras_CNN.js" ></script>
    
    <form name="SpectraKeras" id="SpectraKeras">
      <br><br><select name="model" id="model" py-change="getModel">
            <option>Raman Spectroscopy</option>
            <option>Powder X-ray Diffraction (XRD)</option>
            </select><br><br>
    </form>
      <input type="file" name="file" id="file" onchange="handleFileSelect()"  />
      <div name="predict" id="predict"><br><button name="button" id="button" py-click="main">Identify Mineral via ML</button></div>
      
    <div id="out"><br><text_area id="output"><br></text_area></div>

</body>
</html>

